---
import { getCollection } from "astro:content";
import { ArrowUpRight } from "lucide-astro";

import { getLanguageFromURL, removeLangFromSlug } from "~/i18n/utils";

const projects = await getCollection('projects');

const lang = getLanguageFromURL(Astro.url.pathname);
---
<div class="space-y-4">
	{
		projects
			.filter(project => project.slug.startsWith(lang))
			.map(({ slug, data: project }) => (
				<a
					href={`/projects/${removeLangFromSlug(slug)}`}
					class="relative block space-y-1 border border-border p-6 transition-colors hover:border-foreground"
				>
					<div class="space-y-2">
						<h3 class="flex items-center">
							<ArrowUpRight className="w-4 h-4 mr-1" /> {project.title}
						</h3>
						<p class="text-muted-foreground">{project.description}</p>
					</div>
				</a>
		))
	}
</div>
